<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Posts</title>
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">
</head>
<body>

<section class="hero is-info is-small">
	<figure class="image is-128x128">
		<img class="" src="https://i1.wp.com/ph-files.imgix.net/5b14d384-cc22-4e1f-a5d8-aa8c34529006.png?w=439&q=75" />
	</figure>
</section>

<section class="post">
	{{log post}}
	<div class='container'>
		<div class='card m-3'>
			<header class='hero is-light card-header'>
				<p class='card-header-title'>{{post.title}}
					|
					{{post.user.username}} </p>
				
			</header>
			{{#if post.medium}}
				<div class='card-image'>
					<figure class='image'>
						<iframe
							src='/uploads/{{post.medium.filename}}'
							width='640'
							height='360'
							frameborder='0'
						></iframe>
					</figure>
				</div>
			{{/if}}

			<div class='card-content'>
				<div class='content'>
					{{post.content}}
					<br />
					<!--this needs a helper to display the date time correctly. -->
					<time class='content is-small is-pulled-right'>{{formatDate
						post.date_created
					}}</time>
			</div>
		</div>

		   <footer class="card-footer">
			<span class="card-footer-item">
				<button class='button fa-solid fa-heart is-small'>
					{{post.likes}}
					likes</button>
				<button class='button fa-solid fa-eye is-small'>
					{{post.views}}
					views</button>
				{{! <button class="card-header-icon" aria-label="more options">
		       <span class="icon">
			       <i class="fas fa-angle-down" aria-hidden="true"></i>
		       </span>
		           </button> }}
			</span>
		   </footer>
	</div>

	</div>
	
	<div class='container'>
	<div class='card m-3'>
		<header class='hero is-light card-header'>
			<p class='card-header-title'>
				Comments
			</p>
		</header>
	</div>
	
	{{#each post.comments as |comment|}}
		<div class='card m-3'>
			<div class='card-content'>
				<p>{{comment.content}}</p>
				<p>Posted by
					<strong>{{comment.user.username}}</strong>
					on
					{{formatDate comment.date_created}}</p>
			</div>
		</div>
	{{/each}}
	</div>
	
	{{#if logged_in}}
	<div class='container'>
		<div class='card m-3'>
			<header class='hero is-light card-header'>
				<p class='card-header-title'>New Comment</p>
			</header>
			<div class='card-content'>
				<form>
					<div class='field'>
						<div class='control'>
							<input
								id='comment-input'
								class='input mb-2'
								type='text'
								placeholder='Input Comments...'
							/>
							<button
								id='comment-submit-btn'
								data-user='{{user_id}}'
								data-post={{post.id}}
								class='button is-info m-3'
							>Submit</button>
						</div>
					</div>
					
				</form>
			</div>
		</div>
	</div>
	{{/if}}
</section>

<section class="hero is-info">
	<div class="content has-text-centered has-text-black is-medium">
		<p>
			Designed by Triumvirate with ❤️
		</p>
	</div>
</section>
	
<script src='/js/comment.js'></script>	
</body>
</html>